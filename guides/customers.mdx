---
title: "Customers Integration"
description: "Complete guide to managing customers and KYC verification with HR API"
---

## Overview

Customer management is essential for compliance and risk management. This guide covers how to create, manage, and verify customers using the HR API, including KYC (Know Your Customer) and KYB (Know Your Business) processes.

## Customer Types

<CardGroup cols={2}>
  <Card title="Individual Customers" icon="user">
    - Personal accounts
    - KYC verification required
    - Identity document verification
    - Address verification
  </Card>
  <Card title="Business Customers" icon="building">
    - Corporate accounts
    - KYB verification required
    - Business document verification
    - Authorized signatory verification
  </Card>
</CardGroup>

## Customer Lifecycle

<Steps>
  <Step title="Customer Creation">
    Customer record is created with basic information
  </Step>
  <Step title="Document Upload">
    Required documents are uploaded for verification
  </Step>
  <Step title="Verification Process">
    Documents are reviewed and verified
  </Step>
  <Step title="Approval">
    Customer is approved and can use services
  </Step>
</Steps>

## Creating Customers

### Individual Customer

<CodeGroup>

```javascript JavaScript
async function createIndividualCustomer(customerData) {
  try {
    const response = await fetch('https://api.railsfromthecrypt.com/v1/customers', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        first_name: customerData.firstName,
        last_name: customerData.lastName,
        email: customerData.email,
        phone_number: customerData.phoneNumber,
        date_of_birth: customerData.dateOfBirth,
        address: {
          street: customerData.address.street,
          city: customerData.address.city,
          state: customerData.address.state,
          country: customerData.address.country,
          postal_code: customerData.address.postalCode
        },
        nationality: customerData.nationality,
        occupation: customerData.occupation
      })
    });

    if (!response.ok) {
      throw new Error('Failed to create customer');
    }

    const customer = await response.json();
    console.log('Customer created:', customer);
    
    return customer;
  } catch (error) {
    console.error('Error creating customer:', error);
    throw error;
  }
}
```

```python Python
import requests

def create_individual_customer(customer_data):
    try:
        response = requests.post(
            'https://api.railsfromthecrypt.com/v1/customers',
            headers={
                'Authorization': f'Bearer {access_token}',
                'Content-Type': 'application/json'
            },
            json={
                'first_name': customer_data['first_name'],
                'last_name': customer_data['last_name'],
                'email': customer_data['email'],
                'phone_number': customer_data['phone_number'],
                'date_of_birth': customer_data['date_of_birth'],
                'address': {
                    'street': customer_data['address']['street'],
                    'city': customer_data['address']['city'],
                    'state': customer_data['address']['state'],
                    'country': customer_data['address']['country'],
                    'postal_code': customer_data['address']['postal_code']
                },
                'nationality': customer_data['nationality'],
                'occupation': customer_data['occupation']
            }
        )
        
        if not response.ok:
            raise Exception('Failed to create customer')
        
        customer = response.json()
        print('Customer created:', customer)
        
        return customer
        
    except Exception as e:
        print(f'Error creating customer: {e}')
        raise
```

</CodeGroup>

### Business Customer

<CodeGroup>

```javascript JavaScript
async function createBusinessCustomer(customerData) {
  try {
    const response = await fetch('https://api.railsfromthecrypt.com/v1/customers', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        company_name: customerData.companyName,
        company_email: customerData.companyEmail,
        company_phone_number: customerData.companyPhoneNumber,
        company_address: {
          street: customerData.address.street,
          city: customerData.address.city,
          state: customerData.address.state,
          country: customerData.address.country,
          postal_code: customerData.address.postalCode
        },
        business_type: customerData.businessType,
        registration_number: customerData.registrationNumber,
        tax_id: customerData.taxId,
        authorized_signatory: {
          first_name: customerData.signatory.firstName,
          last_name: customerData.signatory.lastName,
          email: customerData.signatory.email,
          phone_number: customerData.signatory.phoneNumber,
          position: customerData.signatory.position
        }
      })
    });

    if (!response.ok) {
      throw new Error('Failed to create business customer');
    }

    const customer = await response.json();
    console.log('Business customer created:', customer);
    
    return customer;
  } catch (error) {
    console.error('Error creating business customer:', error);
    throw error;
  }
}
```

</CodeGroup>

## Customer Management

### Get Customer List

<CodeGroup>

```javascript JavaScript
async function getCustomers(filters = {}) {
  try {
    const params = new URLSearchParams();
    
    if (filters.status) params.append('status', filters.status);
    if (filters.type) params.append('type', filters.type);
    if (filters.limit) params.append('limit', filters.limit);
    if (filters.page) params.append('page', filters.page);
    
    const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers?${params}`, {
      headers: {
        'Authorization': `Bearer ${accessToken}`
      }
    });

    if (!response.ok) {
      throw new Error('Failed to get customers');
    }

    const customers = await response.json();
    return customers;
  } catch (error) {
    console.error('Error getting customers:', error);
    throw error;
  }
}

// Usage examples
const allCustomers = await getCustomers();
const pendingCustomers = await getCustomers({ status: 'pending' });
const individualCustomers = await getCustomers({ type: 'individual' });
const businessCustomers = await getCustomers({ type: 'business' });
```

</CodeGroup>

### Get Customer Details

<CodeGroup>

```javascript JavaScript
async function getCustomer(customerId) {
  try {
    const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers/${customerId}`, {
      headers: {
        'Authorization': `Bearer ${accessToken}`
      }
    });

    if (!response.ok) {
      throw new Error('Failed to get customer');
    }

    const customer = await response.json();
    return customer;
  } catch (error) {
    console.error('Error getting customer:', error);
    throw error;
  }
}
```

</CodeGroup>

## KYC Verification

### Understanding KYC Status

<CardGroup cols={2}>
  <Card title="Pending" icon="clock">
    - Customer created but not verified
    - Documents not yet submitted
    - Limited functionality available
  </Card>
  <Card title="Under Review" icon="eye">
    - Documents submitted
    - Verification in progress
    - Manual review required
  </Card>
  <Card title="Approved" icon="check">
    - Verification completed
    - Full access to services
    - Can create virtual accounts
  </Card>
  <Card title="Rejected" icon="times">
    - Verification failed
    - Documents need resubmission
    - Limited access to services
  </Card>
</CardGroup>

### KYC Verification Tasks

<CodeGroup>

```javascript JavaScript
async function getCustomerVerificationTasks(customerId) {
  try {
    const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers/${customerId}/verification-tasks`, {
      headers: {
        'Authorization': `Bearer ${accessToken}`
      }
    });

    if (!response.ok) {
      throw new Error('Failed to get verification tasks');
    }

    const tasks = await response.json();
    return tasks;
  } catch (error) {
    console.error('Error getting verification tasks:', error);
    throw error;
  }
}

// Usage
const customer = await getCustomer(customerId);
const verificationTasks = await getCustomerVerificationTasks(customerId);

console.log('Customer KYC status:', customer.kyc_status);
console.log('Required tasks:', verificationTasks);
```

</CodeGroup>

### Document Upload Process

<CodeGroup>

```javascript JavaScript
class DocumentUploader {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async uploadDocument(customerId, documentType, file) {
    try {
      const formData = new FormData();
      formData.append('document_type', documentType);
      formData.append('file', file);
      
      const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers/${customerId}/documents`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${accessToken}`
        },
        body: formData
      });

      if (!response.ok) {
        throw new Error('Failed to upload document');
      }

      const result = await response.json();
      console.log('Document uploaded:', result);
      
      return result;
    } catch (error) {
      console.error('Error uploading document:', error);
      throw error;
    }
  }
  
  async uploadMultipleDocuments(customerId, documents) {
    const uploadPromises = documents.map(doc => 
      this.uploadDocument(customerId, doc.type, doc.file)
    );
    
    try {
      const results = await Promise.all(uploadPromises);
      console.log('All documents uploaded:', results);
      return results;
    } catch (error) {
      console.error('Error uploading documents:', error);
      throw error;
    }
  }
}

// Usage
const uploader = new DocumentUploader();

// Upload individual documents
await uploader.uploadDocument(customerId, 'passport', passportFile);
await uploader.uploadDocument(customerId, 'proof_of_address', addressFile);

// Upload multiple documents
const documents = [
  { type: 'passport', file: passportFile },
  { type: 'proof_of_address', file: addressFile },
  { type: 'selfie', file: selfieFile }
];

await uploader.uploadMultipleDocuments(customerId, documents);
```

</CodeGroup>

## KYB Verification

### Business Customer Verification

<CodeGroup>

```javascript JavaScript
class BusinessVerification {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async initiateKYB(customerId) {
    try {
      const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers/${customerId}/kyb/initiate`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${accessToken}`,
          'Content-Type': 'application/json'
        }
      });

      if (!response.ok) {
        throw new Error('Failed to initiate KYB');
      }

      const kybData = await response.json();
      console.log('KYB initiated:', kybData);
      
      return kybData;
    } catch (error) {
      console.error('Error initiating KYB:', error);
      throw error;
    }
  }
  
  async uploadBusinessDocuments(customerId, documents) {
    const requiredDocuments = [
      'certificate_of_incorporation',
      'articles_of_association',
      'proof_of_address',
      'authorized_signatory_id',
      'bank_statement'
    ];
    
    const uploadPromises = documents.map(doc => 
      this.uploadDocument(customerId, doc.type, doc.file)
    );
    
    try {
      const results = await Promise.all(uploadPromises);
      console.log('Business documents uploaded:', results);
      return results;
    } catch (error) {
      console.error('Error uploading business documents:', error);
      throw error;
    }
  }
  
  async checkKYBStatus(customerId) {
    try {
      const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers/${customerId}/kyb/status`, {
        headers: {
          'Authorization': `Bearer ${accessToken}`
        }
      });

      if (!response.ok) {
        throw new Error('Failed to check KYB status');
      }

      const status = await response.json();
      return status;
    } catch (error) {
      console.error('Error checking KYB status:', error);
      throw error;
    }
  }
}
```

</CodeGroup>

## Customer Status Management

### Status Updates

<CodeGroup>

```javascript JavaScript
class CustomerStatusManager {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async updateCustomerStatus(customerId, status, reason = null) {
    try {
      const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers/${customerId}/status`, {
        method: 'PATCH',
        headers: {
          'Authorization': `Bearer ${accessToken}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          status: status,
          reason: reason
        })
      });

      if (!response.ok) {
        throw new Error('Failed to update customer status');
      }

      const updatedCustomer = await response.json();
      console.log('Customer status updated:', updatedCustomer);
      
      return updatedCustomer;
    } catch (error) {
      console.error('Error updating customer status:', error);
      throw error;
    }
  }
  
  async suspendCustomer(customerId, reason) {
    return this.updateCustomerStatus(customerId, 'suspended', reason);
  }
  
  async activateCustomer(customerId) {
    return this.updateCustomerStatus(customerId, 'active');
  }
  
  async deactivateCustomer(customerId, reason) {
    return this.updateCustomerStatus(customerId, 'inactive', reason);
  }
}
```

</CodeGroup>

## Customer Search and Filtering

### Advanced Search

<CodeGroup>

```javascript JavaScript
class CustomerSearch {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async searchCustomers(searchCriteria) {
    try {
      const params = new URLSearchParams();
      
      if (searchCriteria.query) params.append('q', searchCriteria.query);
      if (searchCriteria.status) params.append('status', searchCriteria.status);
      if (searchCriteria.type) params.append('type', searchCriteria.type);
      if (searchCriteria.country) params.append('country', searchCriteria.country);
      if (searchCriteria.created_after) params.append('created_after', searchCriteria.created_after);
      if (searchCriteria.created_before) params.append('created_before', searchCriteria.created_before);
      if (searchCriteria.limit) params.append('limit', searchCriteria.limit);
      if (searchCriteria.page) params.append('page', searchCriteria.page);
      
      const response = await fetch(`https://api.railsfromthecrypt.com/v1/customers/search?${params}`, {
        headers: {
          'Authorization': `Bearer ${accessToken}`
        }
      });

      if (!response.ok) {
        throw new Error('Failed to search customers');
      }

      const results = await response.json();
      return results;
    } catch (error) {
      console.error('Error searching customers:', error);
      throw error;
    }
  }
  
  async findCustomerByEmail(email) {
    return this.searchCustomers({ query: email });
  }
  
  async findCustomersByCountry(country) {
    return this.searchCustomers({ country: country });
  }
  
  async findPendingCustomers() {
    return this.searchCustomers({ status: 'pending' });
  }
}
```

</CodeGroup>

## Customer Analytics

### Customer Metrics

<CodeGroup>

```javascript JavaScript
class CustomerAnalytics {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async getCustomerMetrics() {
    try {
      const response = await fetch('https://api.railsfromthecrypt.com/v1/customers/metrics', {
        headers: {
          'Authorization': `Bearer ${accessToken}`
        }
      });

      if (!response.ok) {
        throw new Error('Failed to get customer metrics');
      }

      const metrics = await response.json();
      return metrics;
    } catch (error) {
      console.error('Error getting customer metrics:', error);
      throw error;
    }
  }
  
  async getCustomerStats() {
    try {
      const response = await fetch('https://api.railsfromthecrypt.com/v1/customers/stats', {
        headers: {
          'Authorization': `Bearer ${accessToken}`
        }
      });

      if (!response.ok) {
        throw new Error('Failed to get customer stats');
      }

      const stats = await response.json();
      return stats;
    } catch (error) {
      console.error('Error getting customer stats:', error);
      throw error;
    }
  }
}
```

</CodeGroup>

## Best Practices

### Data Management

<AccordionGroup>
  <Accordion title="Data Privacy">
    - Encrypt sensitive customer data
    - Implement data retention policies
    - Follow GDPR compliance guidelines
    - Regular security audits
  </Accordion>
  <Accordion title="Document Management">
    - Validate document formats
    - Implement document encryption
    - Set up secure storage
    - Regular backup procedures
  </Accordion>
  <Accordion title="Verification Process">
    - Streamline KYC workflows
    - Implement automated checks
    - Provide clear instructions
    - Monitor verification times
  </Accordion>
</AccordionGroup>

### User Experience

<AccordionGroup>
  <Accordion title="Onboarding Flow">
    - Clear step-by-step process
    - Progress indicators
    - Helpful error messages
    - Mobile-friendly interface
  </Accordion>
  <Accordion title="Status Communication">
    - Real-time status updates
    - Clear status explanations
    - Email notifications
    - In-app notifications
  </Accordion>
  <Accordion title="Support">
    - Help documentation
    - Contact information
    - FAQ section
    - Live chat support
  </Accordion>
</AccordionGroup>

## Common Use Cases

### E-commerce Customer Onboarding

<CodeGroup>

```javascript JavaScript
class EcommerceCustomerOnboarding {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async onboardCustomer(userData) {
    try {
      // Step 1: Create customer
      const customer = await this.createCustomer(userData);
      
      // Step 2: Initiate KYC
      const kycTasks = await this.getVerificationTasks(customer.id);
      
      // Step 3: Guide user through verification
      const verificationResult = await this.guideVerification(customer.id, kycTasks);
      
      // Step 4: Monitor verification status
      const finalStatus = await this.monitorVerification(customer.id);
      
      return {
        customer,
        verificationStatus: finalStatus
      };
    } catch (error) {
      console.error('Failed to onboard customer:', error);
      throw error;
    }
  }
  
  async guideVerification(customerId, tasks) {
    const completedTasks = [];
    
    for (const task of tasks) {
      console.log(`Please complete: ${task.description}`);
      
      // Wait for user to complete task
      const result = await this.waitForTaskCompletion(customerId, task.id);
      completedTasks.push(result);
    }
    
    return completedTasks;
  }
  
  async monitorVerification(customerId) {
    const maxAttempts = 30; // 5 minutes with 10-second intervals
    let attempts = 0;
    
    while (attempts < maxAttempts) {
      const customer = await this.getCustomer(customerId);
      
      if (customer.kyc_status === 'approved') {
        return 'approved';
      } else if (customer.kyc_status === 'rejected') {
        return 'rejected';
      }
      
      // Still pending, wait and retry
      await new Promise(resolve => setTimeout(resolve, 10000));
      attempts++;
    }
    
    return 'timeout';
  }
}
```

</CodeGroup>

### Marketplace Seller Verification

<CodeGroup>

```javascript JavaScript
class MarketplaceSellerVerification {
  constructor(apiClient) {
    this.apiClient = apiClient;
  }
  
  async verifySeller(sellerData) {
    try {
      // Step 1: Create business customer
      const customer = await this.createBusinessCustomer(sellerData);
      
      // Step 2: Initiate KYB
      const kybData = await this.initiateKYB(customer.id);
      
      // Step 3: Upload business documents
      const documents = await this.uploadBusinessDocuments(customer.id, sellerData.documents);
      
      // Step 4: Monitor KYB status
      const kybStatus = await this.monitorKYBStatus(customer.id);
      
      return {
        customer,
        kybStatus
      };
    } catch (error) {
      console.error('Failed to verify seller:', error);
      throw error;
    }
  }
  
  async monitorKYBStatus(customerId) {
    const maxAttempts = 60; // 10 minutes with 10-second intervals
    let attempts = 0;
    
    while (attempts < maxAttempts) {
      const status = await this.checkKYBStatus(customerId);
      
      if (status.status === 'approved') {
        return 'approved';
      } else if (status.status === 'rejected') {
        return 'rejected';
      }
      
      // Still pending, wait and retry
      await new Promise(resolve => setTimeout(resolve, 10000));
      attempts++;
    }
    
    return 'timeout';
  }
}
```

</CodeGroup>

## Troubleshooting

### Common Issues

<CardGroup cols={2}>
  <Card title="KYC Verification Failed" icon="exclamation-triangle">
    - Check document quality
    - Verify document authenticity
    - Ensure all required documents
    - Contact support for review
  </Card>
  <Card title="Document Upload Issues" icon="upload">
    - Check file format and size
    - Verify document type
    - Ensure clear image quality
    - Try different file format
  </Card>
  <Card title="Customer Creation Failed" icon="user-plus">
    - Validate required fields
    - Check email format
    - Verify phone number format
    - Ensure unique email address
  </Card>
  <Card title="Status Update Issues" icon="sync">
    - Check customer permissions
    - Verify status transition rules
    - Review update reasons
    - Contact support if needed
  </Card>
</CardGroup>

### Error Handling

<CodeGroup>

```javascript JavaScript
class CustomerErrorHandler {
  static handle(error, context = {}) {
    const errorMap = {
      'INVALID_EMAIL': {
        message: 'Invalid email address format',
        action: 'Please provide a valid email address',
        retryable: true
      },
      'DUPLICATE_EMAIL': {
        message: 'Email address already exists',
        action: 'Please use a different email address',
        retryable: false
      },
      'INVALID_PHONE': {
        message: 'Invalid phone number format',
        action: 'Please provide a valid phone number',
        retryable: true
      },
      'DOCUMENT_UPLOAD_FAILED': {
        message: 'Failed to upload document',
        action: 'Please check file format and try again',
        retryable: true
      },
      'KYC_VERIFICATION_FAILED': {
        message: 'KYC verification failed',
        action: 'Please check document quality and resubmit',
        retryable: true
      }
    };
    
    const errorInfo = errorMap[error.code] || {
      message: 'An unexpected error occurred',
      action: 'Please contact support',
      retryable: false
    };
    
    return {
      ...errorInfo,
      code: error.code,
      context: context,
      timestamp: new Date().toISOString()
    };
  }
}
```

</CodeGroup>

## Support

### Getting Help

For customer management issues:

1. **Check customer status** - Use the API to get current status
2. **Review verification tasks** - Check what documents are required
3. **Contact support** - Email [support@hashrails.xyz](mailto:support@hashrails.xyz) with customer details

### Resources

<CardGroup cols={2}>
  <Card
    title="API Reference"
    icon="book"
    href="/api/customers/create"
  >
    Complete API documentation for customers
  </Card>
  <Card
    title="KYC Guide"
    icon="shield-check"
    href="/guides/kyc-verification"
  >
    Detailed KYC verification process
  </Card>
  <Card
    title="Error Handling"
    icon="exclamation-triangle"
    href="/concepts/error-handling"
  >
    Handle customer-related errors
  </Card>
  <Card
    title="Support"
    icon="headset"
    href="mailto:support@hashrails.xyz"
  >
    Get help from our support team
  </Card>
</CardGroup>
